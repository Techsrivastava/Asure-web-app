<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candidates Form</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="overflow-hidden mb-1">
                    <h2 class="font-weight-normal text-7 mb-0">
                        <strong class="font-weight-extra-bold">Candidates</strong> Form
                    </h2>
                </div>
                <div class="overflow-hidden mb-4 pb-3">
                    <p class="mb-0">Please fill out the form to apply as a candidate.</p>
                </div>

                <form id="candidatesForm" method="POST" enctype="multipart/form-data">
                    <input type="hidden" value="true" name="emailSent" id="emailSent" />
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label class="required text-2"> Name</label>
                            <input
                                type="text"
                                value=""
                                data-msg-required="Please enter your name."
                                maxlength="100"
                                class="form-control"
                                name="name"
                                id="name"
                                required
                            />
                        </div>
                        <div class="form-group col-md-6">
                            <label class="required text-2"> Phone No</label>
                            <input
                                type="tel"
                                value=""
                                data-msg-required="Please enter your phone number."
                                maxlength="100"
                                class="form-control"
                                name="phone"
                                id="phone"
                                required
                            />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="required text-2"> Email</label>
                        <input
                            type="email"
                            value=""
                            data-msg-required="Please enter your email address."
                            data-msg-email="Please enter a valid email address."
                            maxlength="100"
                            class="form-control"
                            name="email"
                            id="email"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label class="required text-2">Gender</label>
                        <div class="form-check form-check-inline">
                            <input
                                type="radio"
                                class="form-check-input"
                                id="maleGender"
                                name="gender"
                                value="Male"
                                required
                            />
                            <label class="form-check-label" for="maleGender">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input
                                type="radio"
                                class="form-check-input"
                                id="femaleGender"
                                name="gender"
                                value="Female"
                                required
                            />
                            <label class="form-check-label" for="femaleGender">Female</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input
                                type="radio"
                                class="form-check-input"
                                id="otherGender"
                                name="gender"
                                value="Other"
                                required
                            />
                            <label class="form-check-label" for="otherGender">LGBTQ2+</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="required text-2">Select Your Status</label>
                        <div class="form-check">
                            <input
                                type="radio"
                                class="form-check-input"
                                id="fresherStatus"
                                name="status"
                                value="Fresher"
                                required
                            />
                            <label class="form-check-label" for="fresherStatus">Fresher</label>
                        </div>
                        <div class="form-check">
                            <input
                                type="radio"
                                class="form-check-input"
                                id="experiencedStatus"
                                name="status"
                                value="Experienced"
                                required
                            />
                            <label class="form-check-label" for="experiencedStatus">Experienced</label>
                        </div>
                        <div class="form-check">
                            <input
                                type="radio"
                                class="form-check-input"
                                id="careerShiftStatus"
                                name="status"
                                value="Career Shift"
                                required
                            />
                            <label class="form-check-label" for="careerShiftStatus">Career Shift</label>
                        </div>
                        <div class="form-check">
                            <input
                                type="radio"
                                class="form-check-input"
                                id="careerRestartStatus"
                                name="status"
                                value="Career Restart"
                                required
                            />
                            <label class="form-check-label" for="careerRestartStatus">Career Restart</label>
                        </div>
                        <div class="form-check">
                            <input
                                type="radio"
                                class="form-check-input"
                                id="veteransStatus"
                                name="status"
                                value="Veterans"
                                required
                            />
                            <label class="form-check-label" for="veteransStatus">Veterans</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="required text-2">Resume</label>
                        <input
                            type="file"
                            class="form-control-file"
                            name="resume"
                            id="resume"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label class="text-2">Comment</label>
                        <textarea
                            maxlength="5000"
                            rows="6"
                            class="form-control"
                            name="comments"
                            id="comments"
                        ></textarea>
                    </div>
                    <div class="form-check">
                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="termsCheckbox"
                            name="terms"
                            required
                        />
                        <label class="form-check-label" for="termsCheckbox">
                            I accept the <a href="#">Terms and Conditions</a>
                        </label>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <hr />
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group col-md-12 mb-5">
                            <input
                                type="submit"
                                id="contactFormSubmit"
                                value="Submit"
                                class="btn btn-primary btn-modern pull-right"
                                data-loading-text="Loading..."
                            />
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="successModalLabel">Success!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Display the data received from the API here -->
                    <div id="successModalData">
                        <!-- Data will be inserted here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="backToIndexBtn">Back to Index</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="errorModalLabel">Error!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Oops! Something went wrong while submitting the form. Please try again later.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
   <!-- Include Axios library -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
   document.addEventListener('DOMContentLoaded', function () {
  const form = document.querySelector('#candidatesForm');
  const successModal = document.querySelector('#successModal');
  const successModalData = document.querySelector('#successModalData');
  const backToIndexBtn = document.querySelector('#backToIndexBtn');

  form.addEventListener('submit', function (e) {
      e.preventDefault();

      const formData = new FormData(form);

      // Send a POST request to the backend API
      fetch('https://asure-backend.onrender.com/candidates/candidates', {
          method: 'POST',
          body: formData,
      })
      .then(response => {
          if (response.ok) {
              // Handle success
              response.json().then(data => {
                  // Display the data in the success modal
                  successModalData.textContent = `Data from API: ${JSON.stringify(data)}`;
                  successModal.classList.add('show');
              });
          } else {
              // Handle error
              // Show error message in the modal or handle it as needed
              successModalData.textContent = 'Error occurred.';
              successModal.classList.add('show');
          }
      })
      .catch(error => {
          // Handle network errors here
          console.error('Network Error:', error);
      });
  });

  // Handle the "Back to Index" button click
  backToIndexBtn.addEventListener('click', function () {
      // Redirect back to index.html
      window.location.href = 'index.html';
  });
});
</script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#candidatesForm").submit(function (e) {
                e.preventDefault();

                // Simulate a successful submission (you can replace this with your actual form submission logic)
                const isSuccessful = true;

                if (isSuccessful) {
                    $("#successModal").modal("show");
                } else {
                    $("#errorModal").modal("show");
                }
            });
        });
    </script>
</body>
</html>
